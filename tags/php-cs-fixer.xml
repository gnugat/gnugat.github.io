<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
    <title><![CDATA[LoÃ¯c Faugeron]]></title>
    <link href="/feed/atom.xml" rel="self"/>
    <link href="/"/>
    <updated>2025-12-03T07:10:55+00:00</updated>
    <id>http://gnugat.github.com</id>
            <author>
            <name><![CDATA[LoÃ¯c Faugeron]]></name>            <email><![CDATA[faugeron.loic@gmail.com]]></email>        </author>
        <generator uri="http://sculpin.io/">Sculpin</generator>
            <entry>
            <title type="html"><![CDATA[eXtreme Legacy 6: From PHP 5 to PHP 8]]></title>
            <link href="/2025/11/19/xl-6-php-8.html"/>
            <updated>2025-11-19T00:00:00+00:00</updated>
            <id>/2025/11/19/xl-6-php-8.html</id>
            <content type="html"><![CDATA[<blockquote>
  <p>ğŸ¤˜ The Migration Warlord breaks the rusted shackles of PHP 5.6,
  leading the great exodus through the valleys of breaking changes,
  into the promised land of PHP 8.5 where type hints
  and constructor property promotion await in glory! ğŸ”¥</p>
</blockquote>

<p>In this series, we're dealing with BisouLand, an eXtreme Legacy application
(2005 LAMP spaghetti code base). So far, we have:</p>

<ol>
<li><a href="/2025/09/10/xl-1-dockerizing-2005-lamp-app.html">ğŸ‹ got it to run in a local container</a></li>
<li><a href="/2025/09/17/xl-2-smoke-tests.html">ğŸ’¨ written Smoke Tests</a></li>
<li><a href="/2025/09/24/xl-3-end-to-end-tests.html">ğŸ¯ written End to End Tests</a></li>
<li><a href="/2025/10/01/xl-4-coding-standards.html">ğŸ§¹ created and applied Coding Standards</a></li>
<li><a href="/2025/10/22/xl-5-pdo.html">â›ƒ migrated to PDO</a></li>
</ol>

<p>This means we can run it locally (http://localhost:43000/),
and have some level of automated tests.</p>

<p>But it's still stuck in the past with PHP 5.6,
so let's upgrade it to PHP 8.5!</p>

<ul>
<li><a href="#docker">Docker</a></li>
<li><a href="#rector">Rector</a></li>
<li><a href="#php-cs-fixer">PHP CS Fixer</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="docker">Docker</h2>

<p>With the migration from the deprecated MySQL extension to PDO,
BisouLand's codebase is technically compatible with the latest PHP version.</p>

<p>At least that's what Claude tells me.</p>

<p>If that's true, then upgrading it is as simple as modifying the monolith's Dockerfile:</p>

<pre><code class="diff">- # Uses PHP 5.6 with PDO MySQL driver
+ # Uses PHP 8.5 with PDO MySQL driver

- FROM php:5.6-apache
- 
- # Update sources.list to use archive repositories for Debian Stretch
- RUN sed -i 's/deb.debian.org/archive.debian.org/g' /etc/apt/sources.list \
-     &amp;&amp; sed -i 's/security.debian.org/archive.debian.org/g' /etc/apt/sources.list \
-     &amp;&amp; sed -i '/stretch-updates/d' /etc/apt/sources.list
+ FROM php:8.5-apache
</code></pre>

<p>We can now build the new image:</p>

<pre><code class="console">cd apps/monolith
make app-init # docker down, docker build, docker up 
</code></pre>

<p>And that's it, welcome to the future!</p>

<h2 id="rector">Rector</h2>

<p>Your eXtreme Legacy application might not be as lucky as BisouLand,
and might require more work for an upgrade.</p>

<p>One way to do so is to use <a href="https://getrector.com/">Rector</a>,
an automated refactoring tool that uses the power of AST to make sure the
changes it makes are safe (i.e. non breaking) to do. Let's install it:</p>

<pre><code class="console">cd apps/qa
make composer arg='require --dev rector/rector'
</code></pre>

<p>We then need to configure it by creating the <code>rector.php</code> file:</p>

<pre><code class="php">&lt;?php

declare(strict_types=1);

use Rector\Caching\ValueObject\Storage\FileCacheStorage;
use Rector\Config\RectorConfig;
use Rector\Set\ValueObject\SetList;

return RectorConfig::configure()
    -&gt;withCache(
        // CI compatible temporary paths for cach
        cacheDirectory: '/tmp/rector',
        cacheClass: FileCacheStorage::class,
    )
    -&gt;withPaths([
        __DIR__,
        __DIR__.'/../monolith',
    ])
    -&gt;withSkip([
        // â€”â€” Excluded paths â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        // [qa]
        __DIR__.'/vendor',
        // [monolith]
        __DIR__.'/../monolith/vendor',
    ])
    -&gt;withSets([
        // â€”â€” PHP â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        SetList::PHP_56,
    ]);
</code></pre>

<p>We can then run it as follow:</p>

<pre><code class="console">make rector # ./vendor/bin/rector
</code></pre>

<p>This initial run will ensure both the Monolith and QA apps are PHP 5.6 compliant,
which they are so no changes done.</p>

<p>We can be bold and brave and change Rector's config straight from <code>SetList::PHP_56</code>
to <code>SetList::PHP_84</code>, which will then make all the necessary upgrades from PHP 5.6 to 8.5,
but incremental steps are safer so we'll start with PHP 7.0:</p>

<pre><code class="console">sed -i -e 's/PHP_56/PHP_70/g' ./rector.php
# ğŸ On Mac: sed -i '' -e 's/PHP_56/PHP_70/g' ./rector.php
</code></pre>

<p>Running it (<code>make rector</code>) will spot one change that needs to be done:
replace <code>rand()</code> with <code>random_int()</code>:</p>

<pre><code class="diff">              // Si les bisous du dÃ©fenseurs sont prÃ©sent, donc qu'il n'attaque pas.
              if (0 == $DefBloque) {
-                 $DefSmack = floor($DefSmack * (1 - 1 / rand(2, 10)));
-                 $DefBaiser = floor($DefBaiser * (1 - 1 / rand(2, 10)));
-                 $DefPelle = floor($DefPelle * (1 - 1 / rand(2, 10)));
+                 $DefSmack = floor($DefSmack * (1 - 1 / random_int(2, 10)));
+                 $DefBaiser = floor($DefBaiser * (1 - 1 / random_int(2, 10)));
+                 $DefPelle = floor($DefPelle * (1 - 1 / random_int(2, 10)));
              }
</code></pre>

<p>Technically <code>rand</code> is still supported in PHP 8,
but it does not generate cryptographically secure digits,
so <code>random_int</code> is recommended instead.</p>

<p>Next step is to upgrade to PHP 7.1, which detects no changes,
so we're safe to upgrade to PHP 7.2, which detects no changes,
so we're safe to upgrade to PHP 7.3, which detects some changes!</p>

<p>The function <code>setcookie</code> can take an array of options as a third parameter
(and yes, we store the password in the cookie. This will need to be fixed later):</p>

<pre><code class="diff">                      if (isset($_POST['auto'])) {
                          $timestamp_expire = time() + 30 * 24 * 3600;
-                         setcookie('pseudo', $pseudo, $timestamp_expire);
-                         setcookie('mdp', $mdp, $timestamp_expire);
+                         setcookie('pseudo', $pseudo, ['expires' =&gt; $timestamp_expire]);
+                         setcookie('mdp', $mdp, ['expires' =&gt; $timestamp_expire]);
                      }
</code></pre>

<p>Next step is to upgrade to PHP 7.4, which detects no changes,
so we're safe to upgrade to PHP 8.0, which detects no changes,
so we're safe to upgrade to PHP 8.1, which detects some changes!</p>

<p>This is an interesting one, as it enforces the type of variables for function
calls that expect for example a string but might receive <code>null</code>:</p>

<pre><code class="diff">      $pdo = bd_connect();
      if (isset($_POST['action'])) {
          $cout = 0;
-         $nuageCible = htmlentities($_POST['nuage']);
-         $positionCible = htmlentities($_POST['position']);
+         $nuageCible = htmlentities((string) $_POST['nuage']);
+         $positionCible = htmlentities((string) $_POST['position']);
</code></pre>

<p>Next step is to upgrade to PHP 8.1, which detects no changes,
so we're safe to upgrade to PHP 8.2, which detects no changes,
so we're safe to upgrade to PHP 8.3, which detects no changes,
so we're safe to upgrade to PHP 8.4, which detects some changes!</p>

<p>This one is for the QA app, it removes the now unnecessary parenthesis around
object instantiation:</p>

<pre><code class="diff">-         (new Dotenv())-&gt;load(__DIR__.'/../../../monolith/.env');
+         new Dotenv()-&gt;load(__DIR__.'/../../../monolith/.env');
</code></pre>

<p>And that's it.</p>

<h2 id="php-cs-fixer">PHP CS Fixer</h2>

<p>With the latest version of PHP,
we can change or Coding Style in <code>.php-cc-fixer.dist.php</code>
to take into account new changes:</p>

<pre><code class="diff">-         // â€”â€” Disabed rules due to PHP version compatibility â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
- 
-         // [PER-CS2.0] Partially disabled due to PHP version constraints.
-         'trailing_comma_in_multiline' =&gt; [
-             'after_heredoc' =&gt; true,
-             'elements' =&gt; [
-                 // 'arguments', For PHP 7.3+
-                 // 'array_destructuring', For PHP 7.1+
-                 'arrays',
-                 // 'match', For PHP 8.0+
-                 // 'parameters', For PHP 8.0+
-             ],
-         ],
+         // â€”â€” Overriden rules â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
+ 
+         // [Symfony] Adding `['elements']['parameters']` (Symfony doesn't have it)
+         'trailing_comma_in_multiline' =&gt; [
+             'after_heredoc' =&gt; true,
+             'elements' =&gt; [
+                 'arguments',
+                 'array_destructuring',
+                 'arrays',
+                 'match',
+                 'parameters',
+             ],
+         ] ,
</code></pre>

<p>But that's not all. PHP CS Fixer also has rule set to help us migrate the style
from old PHP versions to new ones, which we'll do incrementally.</p>

<p>First we enable the rule sets:</p>

<pre><code class="diff">          // â€”â€” CS Rule Sets â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
          '@Symfony' =&gt; true,
          '@Symfony:risky' =&gt; true,
+         '@PHP7x0Migration' =&gt; true,
+         '@PHP7x0Migration:risky' =&gt; true,
</code></pre>

<p>And we run it with <code>make cs-fix</code>. It's detected some changes:
replacing <code>mt_rand</code> which is also not cryptographically secure with <code>random_int</code>:</p>

<pre><code class="diff">          // On choisi une valeur au hasard.

-         $FinalPos = $FreePos[mt_rand(0, $nbLibre - 1)];
+         $FinalPos = $FreePos[random_int(0, $nbLibre - 1)];
</code></pre>

<p>Next step we upgrade the rule set to PHP 7.1</p>

<pre><code class="console">sed -i -e 's/PHP7x0/PHP7x1/g' ./.php-cs-fixer.dist.php
# ğŸ On Mac: sed -i '' -e 's/PHP7x0/PHP7x1/g' ./php-cs-fixer.dist.php
</code></pre>

<p>Running it, we get <code>void</code> return type hints:</p>

<pre><code class="diff">- function GiveNewPosition($idJoueur)
+ function GiveNewPosition($idJoueur): void
  {
      $pdo = bd_connect();
      $sql_info = $pdo-&gt;query('SELECT nombre FROM nuage WHERE id=1');
</code></pre>

<p>Next step is to upgrade to PHP 7.2, which detects no changes,
so we're safe to upgrade to PHP 7.3, which detects some changes!</p>

<p>This one is related to HEREDOC indentation.</p>

<p>I'm gonna be brief now, as after that, upgrading all the way to PHP 8.5,
there were no changes.</p>

<h2 id="conclusion">Conclusion</h2>

<p>With a modern version of PHP, not only do we get security patches,
exciting new feature (typed code, constructor property promotion, readonly final classes, etc),
as well as access to many modern tools and libraries (composer, Symfony components, etc),
but we also get a boost in performance.</p>

<p>Let's back up that last claim by running some vanity benchmarks as follow:</p>

<ol>
<li>start a fresh Monolith container</li>
<li>sign up and log in a temporary account</li>
<li>test load the homepage, as a visitor (not logged in)</li>
<li>test load the Brain page (logged in)</li>
</ol>

<pre><code class="console"># Start fresh
cd apps/monolith
make app-init

BENCH_USER="BisouTest_bench"
BENCH_PASS="SuperSecret123"

# Sign up
curl -X POST 'http://localhost:43000/inscription.html' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -d "Ipseudo=${BENCH_USER}&amp;Imdp=${BENCH_PASS}&amp;Imdp2=${BENCH_PASS}&amp;inscription=S%27inscrire"

# Log in
BENCH_COOKIE=$(curl -X POST 'http://localhost:43000/redirect.php' \
  -H 'Content-Type: application/x-www-form-urlencoded' \
  -d "pseudo=${BENCH_USER}&amp;mdp=${BENCH_PASS}&amp;connexion=Se+connecter" \
  -i -s | grep -i 'set-cookie: PHPSESSID' | sed 's/.*PHPSESSID=\([^;]*\).*/\1/' | tr -d '\r')

# Test load homepage (not signed in)
ab -l -q -k -c 50 -n 10000 http://localhost:43000/ \
    | grep -E "Complete requests|Failed requests|Exception|Requests per second|Time per request.*across"

# Test load Brain page (signed in)
ab -l -q -k -c 50 -n 10000 -C "PHPSESSID=$BENCH_COOKIE" http://localhost:43000/cerveau.html \
    | grep -E "Complete requests|Failed requests|Exception|Requests per second|Time per request.*across"
</code></pre>

<p>On my MacBook M4 (with Docker), the results are as follow:</p>

<ul>
<li>Homepage: <code>+8.9%</code> improvement

<ul>
<li>Requests per second (mean):
from <code>545.67</code> to <code>594.49</code></li>
<li>Time per request (ms, mean, across all concurrent requests):
from <code>1.833</code> to <code>1.682</code></li>
</ul></li>
<li>Brain Page: <code>+30.2%</code> improvement

<ul>
<li>Requests per second (mean):
from <code>313.88</code> to <code>408.78</code></li>
<li>Time per request (ms, mean, across all concurrent requests):
from <code>3.186</code> to <code>2.446</code></li>
</ul></li>
</ul>

<p>Surely with such almighty gains we won't need to rewrite BisouLand in go / rust.</p>

<blockquote>
  <p>â‰ï¸ What do you mean, "the code is still unrefactorable"?</p>
</blockquote>
]]></content>
        </entry>
            <entry>
            <title type="html"><![CDATA[eXtreme Legacy 4: Coding Standards]]></title>
            <link href="/2025/10/01/xl-4-coding-standards.html"/>
            <updated>2025-10-01T00:00:00+01:00</updated>
            <id>/2025/10/01/xl-4-coding-standards.html</id>
            <content type="html"><![CDATA[<blockquote>
  <p>ğŸ¤˜ The Coding Standards Inquisitor rises from the sulphurous pits of Legacy Chaos,
  brandishing the iron scriptures of Style Guides,
  purging the realm of inconsistent formatting with flames of automated linting! ğŸ”¥</p>
</blockquote>

<p>In this series, we're dealing with BisouLand, an eXtreme Legacy application
(2005 LAMP spaghetti code base). So far, we have:</p>

<ol>
<li><a href="/2025/09/10/xl-1-dockerizing-2005-lamp-app.html">ğŸ‹ got it to run in a local container</a></li>
<li><a href="/2025/09/17/xl-2-smoke-tests.html">ğŸ’¨ written Smoke Tests</a></li>
<li><a href="/2025/09/24/xl-3-end-to-end-tests.html">ğŸ¯ written End to End Tests</a></li>
</ol>

<p>This means we can run it locally (http://localhost:8080/),
and have some level of automated tests.</p>

<p>But the code is ugly!</p>

<p>So we're going to establish beautiful Coding Standards,
which will be today's fourth article focus,
and enforce them automatically using PHP CS Fixer.</p>

<ul>
<li><a href="#level-0%3A-setup">Level 0: setup</a></li>
<li><a href="#level-1%3A-psr-1">Level 1: PSR-1</a></li>
<li><a href="#level-2%3A-psr-2">Level 2: PSR-2</a></li>
<li><a href="#level-3%3A-psr-12">Level 3: PSR-12</a></li>
<li><a href="#level-4%3A-per-cs-2.0">Level 4: PER-CS 2.0</a></li>
<li><a href="#level-5%3A-symfony">Level 5: Symfony</a></li>
<li><a href="#conclusion">Conclusion</a></li>
</ul>

<h2 id="level-0%3A-setup">Level 0: setup</h2>

<p>We will not start with the highest quality standard,
as this would make it too difficult to track the changes.</p>

<p>Instead we'll:</p>

<ul>
<li>start with an empty configuration, run the tool, check the changes</li>
<li>then add the smallest set of CS rule we can think of, run again and check</li>
<li>iterate by adding more and more rules</li>
</ul>

<p>Ideally, teams should discuss and agree on a select list of rules to follow,
but <a href="https://cs.symfony.com/doc/rules/index.html">the list of possible rules is too overwhelming</a>.</p>

<p>So instead of picking rules one by one,
we can rely on <a href="https://cs.symfony.com/doc/ruleSets/index.html">rule sets</a>.</p>

<p>My humble opinion is that the <a href="https://cs.symfony.com/doc/ruleSets/Symfony.html">Symfony CS</a>
are the best, but that'd be too many rules to add in one go.</p>

<p>If we check the Symfony rule set doc, at the top we can see <code>@PER-CS3x0</code>.</p>

<p>Rules that start with <code>@</code> are actually rulesets,
so Symfony depends on other smaller rulesets,
and those smaller rulesets also depend on other smaller rulesets.</p>

<p>It's a tedious task,
but we can navigate the documentation website,
construct the tree of rule sets used,
and then start with the smaller one:</p>

<ol>
<li><a href="https://www.php-fig.org/psr/psr-1/">PSR-1: Basic Coding Standard</a></li>
<li><a href="https://www.php-fig.org/psr/psr-2/">PSR-2: Coding Style Guide - deprecated</a></li>
<li><a href="https://www.php-fig.org/psr/psr-12/">PSR-12: Extended Coding Style</a></li>
<li><a href="https://www.php-fig.org/per/coding-style/">PER-CS 2.0: Coding Style</a>
(turns out there's a PER-CS 3.0 since July 2025!)</li>
</ol>

<p>For each rule set, we then check if anything is breaking,
and if so we exclude the specific rule.</p>

<p>Let's start with an empty configuration in <code>apps/qa/.php-cs-fixer.php.dist</code>:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>Running it will not report any problems:</p>

<pre><code class="console">&gt; make cs-check // equivalent to: ./vendor/bin/php-cs-fixer check --verbose
PHP CS Fixer 3.85.1 Alexander by Fabien Potencier, Dariusz Ruminski and contributors.
PHP runtime: 8.4.12
Running analysis on 15 cores with 10 files per process.
Parallel runner is an experimental feature and may be unstable, use it at your own risk. Feedback highly appreciated!
Loaded config default from "/apps/qa/.php-cs-fixer.dist.php".
Using cache file ".php-cs-fixer.cache".
 43/43 [â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“] 100%


Found 0 of 43 files that can be fixed in 0.105 seconds, 18.00 MB memory used
</code></pre>

<h2 id="level-1%3A-psr-1">Level 1: PSR-1</h2>

<p>Let's add the <a href="https://cs.symfony.com/doc/ruleSets/PSR1.html">PSR-1 ruleset</a>:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        '@PSR1' =&gt; true,
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>This will make sure we use:</p>

<ul>
<li><a href="https://cs.symfony.com/doc/rules/php_tag/full_opening_tag.html">full opening tag</a>
(not <code>&lt;?</code> but <code>&lt;?php</code>)</li>
<li><a href="https://cs.symfony.com/doc/rules/basic/encoding.html">encoding</a>
(not BOM, UTF-8)</li>
</ul>

<p>Let's run the checks:</p>

<pre><code class="console">&gt; make cs-check
PHP CS Fixer 3.85.1 Alexander by Fabien Potencier, Dariusz Ruminski and contributors.
PHP runtime: 8.4.12
Running analysis on 15 cores with 10 files per process.
Parallel runner is an experimental feature and may be unstable, use it at your own risk. Feedback highly appreciated!
Loaded config default from "/apps/qa/.php-cs-fixer.dist.php".
Using cache file ".php-cs-fixer.cache".
 43/43 [â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“] 100%

   1) ../monolith/web/news/chemin.php (full_opening_tag)

Found 1 of 43 files that can be fixed in 0.103 seconds, 18.00 MB memory used
</code></pre>

<p>There's one file that uses <code>&lt;?</code>, to automatically fix it we run:</p>

<pre><code class="console">&gt; make cs-fix // equivalent to: ./vendor/bin/php-cs-fixer fix --verbose
PHP CS Fixer 3.85.1 Alexander by Fabien Potencier, Dariusz Ruminski and contributors.
PHP runtime: 8.4.12
Running analysis on 15 cores with 10 files per process.
Parallel runner is an experimental feature and may be unstable, use it at your own risk. Feedback highly appreciated!
Loaded config default from "/apps/qa/.php-cs-fixer.dist.php".
Using cache file ".php-cs-fixer.cache".
 43/43 [â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“] 100%

   1) ../monolith/web/news/chemin.php (full_opening_tag)

Fixed 1 of 43 files in 0.107 seconds, 18.00 MB memory used
</code></pre>

<p>And that's PSR-1 done and dusted.</p>

<h2 id="level-2%3A-psr-2">Level 2: PSR-2</h2>

<p>Time for the <a href="https://cs.symfony.com/doc/ruleSets/PSR2.html">PSR-2 ruleset</a>:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        '@PSR2' =&gt; true,
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>It adds about 30 new rules,
mainly regarding brace placement and indentation formatting.</p>

<p>Let's run a check:</p>

<pre><code class="console">&gt; make cs-check
Loaded config default from "/apps/qa/.php-cs-fixer.dist.php".
Using cache file ".php-cs-fixer.cache".
 43/43 [â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“] 100%

   1) ../monolith/web/calcul.php (no_closing_tag, no_trailing_whitespace, single_blank_line_at_eof)
   2) ../monolith/web/redirect.php (indentation_type, single_space_around_construct, method_argument_space, no_closing_tag, braces_position, statement_indentation, single_blank_line_at_eof)
   3) ../monolith/web/checkConnect.php (indentation_type, elseif, single_space_around_construct, no_closing_tag, no_trailing_whitespace, braces_position, statement_indentation,single_blank_line_at_eof)
   4) ../monolith/web/phpincludes/fctIndex.php (indentation_type, single_space_around_construct, method_argument_space, spaces_inside_parentheses, control_structure_braces, no_closing_tag, no_trailing_whitespace, braces_position, statement_indentation, single_blank_line_at_eof)
   5) ../monolith/web/phpincludes/topten.php (indentation_type, single_space_around_construct, no_trailing_whitespace, braces_position, statement_indentation)
   6) ../monolith/web/phpincludes/pages.php (indentation_type, no_closing_tag, statement_indentation, single_blank_line_at_eof)
   7) ../monolith/web/config/parameters.php (single_blank_line_at_eof)
   8) ../monolith/web/deconnexion.php (indentation_type, single_space_around_construct, no_closing_tag, braces_position, single_blank_line_at_eof)
   9) ../monolith/web/news/rediger_news.php (indentation_type, single_space_around_construct, no_trailing_whitespace, braces_position, statement_indentation)
  10) ../monolith/web/news/chemin.php (no_closing_tag, single_blank_line_at_eof)
  11) ../monolith/web/news/liste_news.php (indentation_type, single_space_around_construct, lowercase_keywords, braces_position, statement_indentation)
  12) ../monolith/web/phpincludes/evo.php (indentation_type, single_space_around_construct, method_argument_space, no_closing_tag, no_trailing_whitespace, braces_position, statement_indentation, single_blank_line_at_eof)
  13) ../monolith/web/phpincludes/stats.php (indentation_type, method_argument_space, statement_indentation)
  14) ../monolith/web/phpincludes/infos.php (indentation_type, single_space_around_construct, braces_position, statement_indentation)
  15) ../monolith/web/phpincludes/yeux.php (indentation_type, single_space_around_construct, method_argument_space, no_trailing_whitespace, braces_position, statement_indentation)
  16) ../monolith/web/phpincludes/inscription.php (indentation_type, single_space_around_construct, method_argument_space, spaces_inside_parentheses, braces_position, statement_indentation)
  17) ../monolith/web/phpincludes/faq.php (indentation_type, braces_position, statement_indentation)
  18) ../monolith/web/phpincludes/construction.php (indentation_type, single_space_around_construct, method_argument_space, no_spaces_after_function_name, braces_position, statement_indentation)
  19) ../monolith/web/phpincludes/recherche.php (indentation_type, single_space_around_construct, no_trailing_whitespace, braces_position)
  20) ../monolith/web/phpincludes/bd.php (braces_position, statement_indentation)
  21) ../monolith/web/phpincludes/accueil.php (indentation_type, no_trailing_whitespace, braces_position, statement_indentation)
  22) ../monolith/web/phpincludes/lire.php (indentation_type, single_space_around_construct, braces_position, statement_indentation)
  23) ../monolith/web/phpincludes/membres.php (indentation_type, single_space_around_construct, method_argument_space, no_trailing_whitespace, braces_position, statement_indentation)
  24) ../monolith/web/phpincludes/nuage.php (indentation_type, single_space_around_construct, method_argument_space, no_trailing_whitespace, braces_position, statement_indentation)
  25) ../monolith/web/phpincludes/attaque.php (indentation_type, single_space_around_construct, method_argument_space, no_closing_tag, no_trailing_whitespace, no_trailing_whitespace_in_comment, no_multiple_statements_per_line, braces_position, statement_indentation, single_blank_line_at_eof)
  26) ../monolith/web/phpincludes/confirmation.php (indentation_type, single_space_around_construct, method_argument_space, spaces_inside_parentheses, no_closing_tag, no_trailing_whitespace, braces_position, statement_indentation, single_blank_line_at_eof)
  27) ../monolith/web/phpincludes/changepass.php (indentation_type, single_space_around_construct, method_argument_space, no_spaces_after_function_name, spaces_inside_parenthes, no_trailing_whitespace, braces_position, statement_indentation)
  28) ../monolith/web/phpincludes/techno.php (indentation_type, single_space_around_construct, method_argument_space, no_spaces_after_function_name, braces_position, statement_indentation)
  29) ../monolith/web/phpincludes/newpass.php (indentation_type, single_space_around_construct, method_argument_space, no_spaces_after_function_name, spaces_inside_parentheses,no_trailing_whitespace, braces_position, statement_indentation)
  30) ../monolith/web/makeBan.php (indentation_type, single_space_around_construct, method_argument_space, no_spaces_after_function_name, spaces_inside_parentheses, no_closing_tag, braces_position, statement_indentation, single_blank_line_at_eof)
  31) ../monolith/web/index.php (indentation_type, single_space_around_construct, method_argument_space, control_structure_braces, no_trailing_whitespace, no_trailing_whitespace_in_comment, braces_position, statement_indentation)
  32) ../monolith/web/phpincludes/livreor.php (indentation_type, single_space_around_construct, no_trailing_whitespace, braces_position, statement_indentation)
  33) ../monolith/web/phpincludes/connexion.php (indentation_type, single_space_around_construct, braces_position, statement_indentation)
  34) ../monolith/web/phpincludes/boite.php (indentation_type, single_space_around_construct, method_argument_space, control_structure_braces, lowercase_keywords, no_trailing_whitespace, braces_position, statement_indentation)
  35) ../monolith/web/phpincludes/connected.php (indentation_type, single_space_around_construct, braces_position, statement_indentation)
  36) ../monolith/web/phpincludes/envoi.php (indentation_type, single_space_around_construct, method_argument_space, braces_position, statement_indentation)
  37) ../monolith/web/phpincludes/action.php (indentation_type, single_space_around_construct, method_argument_space, braces_position, statement_indentation)

Found 37 of 43 files that can be fixed in 0.207 seconds, 18.00 MB memory used

Files that were not fixed due to errors reported during linting after fixing:
   1) /apps/qa/../monolith/web/phpincludes/cerveau.php
   2) /apps/qa/../monolith/web/phpincludes/bisous.php
</code></pre>

<p>We have lots of changes,
but what I'd like to focus more on is the two errors at the end.</p>

<p>To find out what specific rules are concerned,
we can replaced <code>PSR2</code> with <a href="https://cs.symfony.com/doc/ruleSets/PSR2.html">all the individual rules it includes</a>:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        // '@PSR2' =&gt; true,
        '@PSR1' =&gt; true,

        'blank_line_after_namespace' =&gt; true,
        'braces_position' =&gt; true,
        'class_definition' =&gt; true,
        'constant_case' =&gt; true,
        'control_structure_braces' =&gt; true,
        'control_structure_continuation_position' =&gt; true,
        'elseif' =&gt; true,
        'function_declaration' =&gt; ['closure_fn_spacing' =&gt; 'one'],
        'indentation_type' =&gt; true,
        'line_ending' =&gt; true,
        'lowercase_keywords' =&gt; true,
        'method_argument_space' =&gt; ['after_heredoc' =&gt; false, 'attribute_placement' =&gt; 'ignore', 'on_multiline' =&gt; 'ensure_fully_multiline'],
        'modifier_keywords' ['elements' =&gt; ['method', 'property']],
        'no_break_comment' =&gt; true,
        'no_closing_tag' =&gt; true,
        'no_multiple_statements_per_line' =&gt; true,
        'no_space_around_double_colon' =&gt; true,
        'no_spaces_after_function_name' =&gt; true,
        'no_trailing_whitespace' =&gt; true,
        'no_trailing_whitespace_in_comment' =&gt; true,
        'single_blank_line_at_eof' =&gt; true,
        'single_class_element_per_statement' =&gt; ['elements' =&gt; ['property']],
        'single_import_per_statement' =&gt; true,
        'single_line_after_imports' =&gt; true,
        'single_space_around_construct' =&gt; ['constructs_followed_by_a_single_space' =&gt; ['abstract', 'as', 'case', 'catch', 'class', 'do', 'else', 'elseif', 'final', 'for', 'foreach', 'function', 'if', 'interface', 'namespace', 'private', 'protected', 'public', 'static', 'switch', 'trait', 'try', 'use_lambda', 'while'], 'constructs_preceded_by_a_single_space' =&gt; ['as', 'else', 'elseif', 'use_lambda']],
        'spaces_inside_parentheses' =&gt; true,
        'statement_indentation' =&gt; true,
        'switch_case_semicolon_to_colon' =&gt; true,
        'switch_case_space' =&gt; true,
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>Then we eliminate one rule, run the check,
and see if the error is still there, then eliminate the next rule, etc.</p>

<p>Doing so, I've identified the following rule as being the offender:</p>

<ul>
<li><a href="https://cs.symfony.com/doc/rules/whitespace/statement_indentation.html">statement_indentation</a></li>
</ul>

<p>Looking at <code>apps/monolith/web/phpincludes/cerveau.php</code>,
we can see a mix of HTML and PHP (the following is a condensed example):</p>

<pre><code class="php">  &lt;h1&gt;Cerveau&lt;/h1&gt;
  &lt;?php
  if ($_SESSION['logged'] == true)
  {
  $production = calculerGenAmour(0,3600,$nbE[0][0],$nbE[1][0],$nbE[1][1],$nbE[1][2]);
  ?&gt;
  Score : &lt;strong&gt;&lt;?php echo formaterNombre($score); ?&gt;&lt;/strong&gt; Point&lt;?php echo pluriel($score);?&gt;&lt;br /&gt;
  &lt;?php
        if ($donnees_info = mysql_fetch_assoc($sql_info))
        {
                $pseudoCible = $donnees_info2['pseudo'];
  ?&gt;
  Tu vas tenter d'embrasser &lt;strong&gt;&lt;?php echo $pseudoCible; ?&gt;&lt;/strong&gt;
  &lt;?php
        }
  }
  ?&gt;
</code></pre>

<p>This is <a href="https://github.com/PHP-CS-Fixer/PHP-CS-Fixer/issues/3702#issuecomment-396717120">a known issue</a>,
and currently PHP CS Fixer doesn't support these kind of files,
so all we can do is restore <code>PSR2</code> and then disable that one specific rule:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        // â€”â€” CS Rule Sets â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        '@PSR2' =&gt; true,

        // â€”â€” Overriden rules â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

        // [PSR2] Disabled as the fixes break the following files:
        // 1) ../monolith/web/phpincludes/bisous.php
        // 2) ../monolith/web/phpincludes/cerveau.php
        'statement_indentation' =&gt; false,
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>Now we can fix the files running <code>make cs-fix</code>.</p>

<h2 id="level-3%3A-psr-12">Level 3: PSR-12</h2>

<p>Let's now upgrade to <a href="https://cs.symfony.com/doc/ruleSets/PSR12.html">PSR-12 ruleset</a>:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        // â€”â€” CS Rule Sets â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        '@PSR12' =&gt; true,

        // â€”â€” Overriden rules â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

        // [PSR2] Disabled as the fixes break the following files:
        // 1) ../monolith/web/phpincludes/bisous.php
        // 2) ../monolith/web/phpincludes/cerveau.php
        'statement_indentation' =&gt; false,
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>PSR-12 extends PSR-2 with rules for modern PHP syntax,
specifically how to format newer language features like:</p>

<ul>
<li>type declarations</li>
<li>arrow functions</li>
<li>anonymous classes</li>
<li>trait usage</li>
</ul>

<p>As well as other PHP 7+ constructs that didn't exist when PSR-2 was written
(in 2012, when PHP 5.4 got released).</p>

<p>Let's run the checks:</p>

<pre><code class="console">&gt; make cs-check
PHP CS Fixer 3.85.1 Alexander by Fabien Potencier, Dariusz Ruminski and contributors.
PHP runtime: 8.4.12
Running analysis on 15 cores with 10 files per process.
Parallel runner is an experimental feature and may be unstable, use it at your own risk. Feedback highly appreciated!
Loaded config default from "/apps/qa/.php-cs-fixer.dist.php".
Using cache file ".php-cs-fixer.cache".
 43/43 [â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“] 100%

   1) ../monolith/web/calcul.php (binary_operator_spaces)
   2) ../monolith/web/redirect.php (blank_line_after_opening_tag, binary_operator_spaces, no_whitespace_in_blank_line)
   3) ../monolith/web/checkConnect.php (binary_operator_spaces, no_whitespace_in_blank_line)
   4) ../monolith/web/phpincludes/fctIndex.php (blank_line_after_opening_tag, binary_operator_spaces, no_whitespace_in_blank_line)
   5) ../monolith/web/phpincludes/topten.php (binary_operator_spaces, no_whitespace_in_blank_line)
   6) ../monolith/web/phpincludes/pages.php (blank_line_after_opening_tag)
   7) ../monolith/web/deconnexion.php (blank_line_after_opening_tag, binary_operator_spaces)
   8) ../monolith/web/news/rediger_news.php (no_whitespace_in_blank_line)
   9) ../monolith/web/news/chemin.php (blank_line_after_opening_tag)
  10) ../monolith/web/phpincludes/evo.php (binary_operator_spaces, no_whitespace_in_blank_line)
  11) ../monolith/web/phpincludes/stats.php (binary_operator_spaces, no_whitespace_in_blank_line)
  12) ../monolith/web/phpincludes/infos.php (binary_operator_spaces)
  13) ../monolith/web/phpincludes/cerveau.php (binary_operator_spaces, no_whitespace_in_blank_line)
  14) ../monolith/web/phpincludes/yeux.php (binary_operator_spaces, no_whitespace_in_blank_line)
  15) ../monolith/web/phpincludes/inscription.php (binary_operator_spaces, no_whitespace_in_blank_line)
  16) ../monolith/web/phpincludes/faq.php (binary_operator_spaces, no_whitespace_in_blank_line)
  17) ../monolith/web/phpincludes/construction.php (binary_operator_spaces)
  18) ../monolith/web/phpincludes/recherche.php (binary_operator_spaces)
  19) ../monolith/web/makeBan.php (binary_operator_spaces, no_whitespace_in_blank_line)
  20) ../monolith/web/index.php (binary_operator_spaces, no_whitespace_in_blank_line)
  21) ../monolith/web/phpincludes/livreor.php (binary_operator_spaces, no_whitespace_in_blank_line)
  22) ../monolith/web/phpincludes/bisous.php (binary_operator_spaces, no_whitespace_in_blank_line)
  23) ../monolith/web/phpincludes/boite.php (indentation_type, binary_operator_spaces, no_whitespace_in_blank_line)
  24) ../monolith/web/phpincludes/connected.php (indentation_type, binary_operator_spaces, no_whitespace_in_blank_line)
  25) ../monolith/web/phpincludes/envoi.php (binary_operator_spaces, no_whitespace_in_blank_line)
  26) ../monolith/web/phpincludes/action.php (binary_operator_spaces, no_whitespace_in_blank_line)
  27) ../monolith/web/phpincludes/accueil.php (binary_operator_spaces, no_whitespace_in_blank_line)
  28) ../monolith/web/phpincludes/lire.php (binary_operator_spaces, no_whitespace_in_blank_line)
  29) ../monolith/web/phpincludes/membres.php (binary_operator_spaces)
  30) ../monolith/web/phpincludes/nuage.php (binary_operator_spaces, no_whitespace_in_blank_line)
  31) ../monolith/web/phpincludes/attaque.php (blank_line_after_opening_tag, binary_operator_spaces, no_whitespace_in_blank_line)
  32) ../monolith/web/phpincludes/confirmation.php (binary_operator_spaces, no_whitespace_in_blank_line)
  33) ../monolith/web/phpincludes/changepass.php (binary_operator_spaces, no_whitespace_in_blank_line)
  34) ../monolith/web/phpincludes/techno.php (binary_operator_spaces)
  35) ../monolith/web/phpincludes/newpass.php (binary_operator_spaces, no_whitespace_in_blank_line)

Found 35 of 43 files that can be fixed in 0.207 seconds, 18.00 MB memory used
</code></pre>

<p>So far so good, let's apply the changes: <code>make cs-fix</code>.</p>

<p>But we are not finished here, it's time to introduce <strong>risky</strong> rules:
these are rules that once applied can potentially change the logic and behaviour of your code.</p>

<p>For example the rule <a href="https://cs.symfony.com/doc/rules/function_notation/no_unreachable_default_argument_value.html">no_unreachable_default_argument_value</a>,
will remove default values for arguments,
that come before other arguments without default values.</p>

<p>Here's the new configuration:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        // â€”â€” CS Rule Sets â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        '@PSR12' =&gt; true,
        '@PSR12:risky' =&gt; true,

        // â€”â€” Overriden rules â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

        // [PSR2] Disabled as the fixes break the following files:
        // 1) ../monolith/web/phpincludes/bisous.php
        // 2) ../monolith/web/phpincludes/cerveau.php
        'statement_indentation' =&gt; false,
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>Running <code>make cs-check</code> will show that all is fine,
so we apply the change through <code>make cs-fix</code>,
and then we have a look at the changes made,
and test around to make sure nothing is broken.</p>

<h2 id="level-4%3A-per-cs-2.0">Level 4: PER CS 2.0</h2>

<p>Next is the <a href="https://cs.symfony.com/doc/ruleSets/PERCS2x0.html">PER CS 2.0 ruleset</a>:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        // â€”â€” CS Rule Sets â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        '@PER-CS2x0' =&gt; true,
        '@PER-CS2x0:risky' =&gt; true,

        // â€”â€” Overriden rules â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

        // [PSR2] Disabled as the fixes break the following files:
        // 1) ../monolith/web/phpincludes/bisous.php
        // 2) ../monolith/web/phpincludes/cerveau.php
        'statement_indentation' =&gt; false,
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>As the PHP language evolves it gets new features,
which then requires the coding standards PSRs to be updated.</p>

<p>However the PSRs process where not suitable for updates,
so PER (PHP Evolving Recommendation) was created.</p>

<p>PER CS 1.0, released in 2022, is intentionally strictly equivalent to PSR-12.</p>

<p>In 2023, PER CS 2.0 was released, to cover PHP 8 new features, such as:</p>

<ul>
<li>Type declarations for properties</li>
<li>Constructor property promotion</li>
<li>Match expressions</li>
<li>Named arguments</li>
<li>Attributes</li>
<li>Readonly properties and classes</li>
<li>Enum declarations</li>
</ul>

<p>Because it is targeted at new PHP versions,
some of its rule won't be compatible with our version of PHP (5.6):</p>

<ul>
<li><a href="https://cs.symfony.com/doc/rules/control_structure/trailing_comma_in_multiline.html">trailing_comma_in_multiline</a></li>
</ul>

<p>In PHP 5.6, trailing commas are only supported with arrays,
so we need to change our configuration slightly:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        // â€”â€” CS Rule Sets â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        '@PER-CS2x0' =&gt; true,
        '@PER-CS2x0:risky' =&gt; true,

        // â€”â€” Overriden rules â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

        // [PSR2] Disabled as the fixes break the following files:
        // 1) ../monolith/web/phpincludes/bisous.php
        // 2) ../monolith/web/phpincludes/cerveau.php
        'statement_indentation' =&gt; false,

        // [PER-CS2.0] Partially disabled due to PHP version constraints.
        'trailing_comma_in_multiline' =&gt; [
            'after_heredoc' =&gt; true,
            'elements' =&gt; [
                // 'arguments', For PHP 7.3+
                // 'array_destructuring', For PHP 7.1+
                'arrays',
                // 'match', For PHP 8.0+
                // 'parameters', For PHP 8.0+
            ],
        ],
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>If we run the checks:</p>

<pre><code class="console">&gt; make cs-check
PHP CS Fixer 3.88.2 Folding Bike by Fabien Potencier, Dariusz Ruminski and contributors.
PHP runtime: 8.4.12
Running analysis on 15 cores with 10 files per process.
Parallel runner is an experimental feature and may be unstable, use it at your own risk. Feedback highly appreciated!
Loaded config default from "/apps/qa/.php-cs-fixer.dist.php".
Using cache file ".php-cs-fixer.cache".
 43/43 [â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“] 100%

   1) ../monolith/web/calcul.php (concat_space, binary_operator_spaces)
   2) ../monolith/web/redirect.php (blank_line_after_opening_tag, concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
   3) ../monolith/web/checkConnect.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
   4) ../monolith/web/phpincludes/fctIndex.php (array_syntax, array_indentation, blank_line_after_opening_tag, concat_space, trailing_comma_in_multiline, binary_operator_spaces,no_whitespace_in_blank_line)
   5) ../monolith/web/phpincludes/topten.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
   6) ../monolith/web/phpincludes/pages.php (array_syntax, blank_line_after_opening_tag, trailing_comma_in_multiline)
   7) ../monolith/web/deconnexion.php (blank_line_after_opening_tag, concat_space, binary_operator_spaces)
   8) ../monolith/web/news/rediger_news.php (no_whitespace_in_blank_line)
   9) ../monolith/web/news/chemin.php (blank_line_after_opening_tag)
  10) ../monolith/web/news/liste_news.php (concat_space)
  11) ../monolith/web/phpincludes/evo.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  12) ../monolith/web/phpincludes/stats.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  13) ../monolith/web/phpincludes/infos.php (array_syntax, concat_space, trailing_comma_in_multiline, binary_operator_spaces)
  14) ../monolith/web/phpincludes/cerveau.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  15) ../monolith/web/phpincludes/yeux.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  16) ../monolith/web/phpincludes/inscription.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  17) ../monolith/web/phpincludes/faq.php (array_syntax, concat_space, trailing_comma_in_multiline, binary_operator_spaces, no_whitespace_in_blank_line)
  18) ../monolith/web/phpincludes/construction.php (concat_space, binary_operator_spaces)
  19) ../monolith/web/phpincludes/recherche.php (concat_space, binary_operator_spaces)
  20) ../monolith/web/phpincludes/bd.php (concat_space)
  21) ../monolith/web/makeBan.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  22) ../monolith/web/index.php (array_syntax, concat_space, trailing_comma_in_multiline, binary_operator_spaces, no_whitespace_in_blank_line)
  23) ../monolith/web/phpincludes/livreor.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  24) ../monolith/web/phpincludes/bisous.php (array_syntax, concat_space, trailing_comma_in_multiline, binary_operator_spaces, no_whitespace_in_blank_line)
  25) ../monolith/web/phpincludes/boite.php (indentation_type, concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  26) ../monolith/web/phpincludes/connected.php (indentation_type, concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  27) ../monolith/web/phpincludes/envoi.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  28) ../monolith/web/phpincludes/action.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  29) ../monolith/web/phpincludes/accueil.php (array_syntax, array_indentation, binary_operator_spaces, no_whitespace_in_blank_line)
  30) ../monolith/web/phpincludes/lire.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  31) ../monolith/web/phpincludes/membres.php (concat_space, binary_operator_spaces)
  32) ../monolith/web/phpincludes/nuage.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  33) ../monolith/web/phpincludes/attaque.php (blank_line_after_opening_tag, concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  34) ../monolith/web/phpincludes/confirmation.php (array_syntax, concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  35) ../monolith/web/phpincludes/changepass.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)
  36) ../monolith/web/phpincludes/techno.php (concat_space, binary_operator_spaces)
  37) ../monolith/web/phpincludes/newpass.php (concat_space, binary_operator_spaces, no_whitespace_in_blank_line)

Found 37 of 43 files that can be fixed in 0.210 seconds, 16.00 MB memory used
</code></pre>

<p>Once again, no issues there, so we can apply the fixes: <code>make-cs fix</code>.</p>

<h2 id="level-5%3A-symfony">Level 5: Symfony</h2>

<p>Time for the final boss, the Coding Standards used in the Symfony project.</p>

<p>See <a href="https://cs.symfony.com/doc/ruleSets/Symfony.html">Symfony ruleset here</a>,
and <a href="https://cs.symfony.com/doc/ruleSets/SymfonyRisky.html">Symfony:risky ruleset there</a>.</p>

<p>Those are by no means meant to be used in Symfony projects (or any projects),
it's just what the Symfony developers use internally to build the framework.</p>

<p>But these 41 rules provide:</p>

<ul>
<li>Stricter PHPDoc requirements</li>
<li>Import (<code>use</code> statements) organisation and formatting</li>
<li>More opinionated whitespace and formatting rules</li>
<li>Type handling - Specific rules about how types are ordered and formatted</li>
</ul>

<p>The 34 risky rules also add performance optimisations
(e.g. native function invocation with leading backslash to by pass autoloading lookup).</p>

<p>So let's adopt them here:</p>

<pre><code class="php">&lt;?php

use PhpCsFixer\Runner\Parallel\ParallelConfigFactory;

$finder = (new PhpCsFixer\Finder())
    -&gt;in(__DIR__.'/../monolith/web')
    -&gt;exclude('ban')
    -&gt;exclude('images')
    -&gt;exclude('includes')
    -&gt;exclude('polices')
    -&gt;exclude('smileys')
;

return (new PhpCsFixer\Config())
    -&gt;setRules([
        // â€”â€” CS Rule Sets â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
        '@Symfony' =&gt; true,
        '@Symfony:risky' =&gt; true,

        // â€”â€” Overriden rules â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”

        // [PSR2] Disabled as the fixes break the following files:
        // 1) ../monolith/web/phpincludes/bisous.php
        // 2) ../monolith/web/phpincludes/cerveau.php
        'statement_indentation' =&gt; false,

        // [PER-CS2.0] Partially disabled due to PHP version constraints.
        'trailing_comma_in_multiline' =&gt; [
            'after_heredoc' =&gt; true,
            'elements' =&gt; [
                // 'arguments', For PHP 7.3+
                // 'array_destructuring', For PHP 7.1+
                'arrays',
                // 'match', For PHP 8.0+
                // 'parameters', For PHP 8.0+
            ],
        ],
    ])
    -&gt;setRiskyAllowed(true)
    -&gt;setParallelConfig(ParallelConfigFactory::detect())
    -&gt;setUsingCache(true)
    -&gt;setFinder($finder)
;
</code></pre>

<p>Let's run the checks:</p>

<pre><code class="console">&gt; make cs-check
PHP CS Fixer 3.88.2 Folding Bike by Fabien Potencier, Dariusz Ruminski and contributors.
PHP runtime: 8.4.12
Running analysis on 15 cores with 10 files per process.
Parallel runner is an experimental feature and may be unstable, use it at your own risk. Feedback highly appreciated!
Loaded config default from "/apps/qa/.php-cs-fixer.dist.php".
Using cache file ".php-cs-fixer.cache".
 43/43 [â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“â–“] 100%

   1) ../monolith/web/calcul.php (concat_space, no_extra_blank_lines)
   2) ../monolith/web/redirect.php (single_quote, single_line_comment_spacing, concat_space, yoda_style, no_extra_blank_lines)
   3) ../monolith/web/checkConnect.php (increment_style, single_quote, single_line_comment_spacing, concat_space, yoda_style, no_extra_blank_lines)
   4) ../monolith/web/phpincludes/fctIndex.php (single_space_around_construct, no_unneeded_control_parentheses, single_quote, single_line_comment_spacing, concat_space, yoda_style, no_extra_blank_lines, blank_line_before_statement)
   5) ../monolith/web/phpincludes/topten.php (single_space_around_construct, no_unneeded_control_parentheses, increment_style, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
   6) ../monolith/web/phpincludes/pages.php (single_quote, single_line_comment_spacing)
   7) ../monolith/web/deconnexion.php (single_quote, single_line_comment_spacing, concat_space, yoda_style, no_extra_blank_lines)
   8) ../monolith/web/news/rediger_news.php (concat_space, no_extra_blank_lines)
   9) ../monolith/web/news/chemin.php (blank_line_after_opening_tag)
  10) ../monolith/web/news/liste_news.php (single_line_comment_spacing, concat_space, yoda_style, logical_operators, no_extra_blank_lines)
  11) ../monolith/web/reductionNuages.php (single_line_comment_spacing)
  12) ../monolith/web/phpincludes/evo.php (increment_style, single_quote, single_line_comment_spacing, concat_space, yoda_style, no_extra_blank_lines, blank_line_before_statement)
  13) ../monolith/web/phpincludes/stats.php (single_space_around_construct, single_quote, semicolon_after_instruction, concat_space, space_after_semicolon)
  14) ../monolith/web/phpincludes/infos.php (increment_style, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon)
  15) ../monolith/web/phpincludes/cerveau.php (single_space_around_construct, no_unneeded_control_parentheses, single_quote, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  16) ../monolith/web/phpincludes/yeux.php (no_unneeded_control_parentheses, single_quote, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  17) ../monolith/web/phpincludes/inscription.php (single_quote, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  18) ../monolith/web/phpincludes/faq.php (single_quote, single_line_comment_spacing, concat_space, no_extra_blank_lines)
  19) ../monolith/web/phpincludes/construction.php (single_space_around_construct, no_unneeded_control_parentheses, increment_style, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  20) ../monolith/web/phpincludes/recherche.php (single_quote, concat_space, yoda_style)
  21) ../monolith/web/phpincludes/bd.php (concat_space)
  22) ../monolith/web/phpincludes/accueil.php (single_quote, whitespace_after_comma_in_array, yoda_style, space_after_semicolon, no_extra_blank_lines)
  23) ../monolith/web/phpincludes/lire.php (single_space_around_construct, single_quote, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  24) ../monolith/web/phpincludes/membres.php (modernize_types_casting, no_unneeded_control_parentheses, increment_style, single_quote, concat_space, no_singleline_whitespace_before_semicolons, yoda_style, no_extra_blank_lines, binary_operator_spaces)
  25) ../monolith/web/phpincludes/nuage.php (single_space_around_construct, increment_style, single_quote, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  26) ../monolith/web/phpincludes/attaque.php (no_empty_statement, no_unneeded_control_parentheses, single_quote, single_line_comment_spacing, concat_space, yoda_style, no_extra_blank_lines)
  27) ../monolith/web/phpincludes/confirmation.php (no_unneeded_control_parentheses, increment_style, single_quote, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  28) ../monolith/web/phpincludes/changepass.php (single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon)
  29) ../monolith/web/phpincludes/techno.php (single_space_around_construct, no_unneeded_control_parentheses, increment_style, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  30) ../monolith/web/phpincludes/newpass.php (single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  31) ../monolith/web/makeBan.php (increment_style, single_quote, single_line_comment_spacing, concat_space, space_after_semicolon)
  32) ../monolith/web/index.php (single_space_around_construct, increment_style, single_quote, no_spaces_after_function_name, single_line_comment_spacing, concat_space, include,no_singleline_whitespace_before_semicolons, yoda_style, space_after_semicolon, no_extra_blank_lines)
  33) ../monolith/web/phpincludes/livreor.php (modernize_types_casting, no_unneeded_control_parentheses, increment_style, single_quote, semicolon_after_instruction, single_line_comment_spacing, native_constant_invocation, concat_space, no_singleline_whitespace_before_semicolons, yoda_style, no_extra_blank_lines, binary_operator_spaces)
  34) ../monolith/web/phpincludes/bisous.php (single_space_around_construct, no_unneeded_control_parentheses, increment_style, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  35) ../monolith/web/phpincludes/connexion.php (yoda_style, no_extra_blank_lines)
  36) ../monolith/web/phpincludes/boite.php (indentation_type, single_space_around_construct, increment_style, single_quote, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  37) ../monolith/web/phpincludes/connected.php (indentation_type, single_quote, single_line_comment_spacing, concat_space, yoda_style, no_extra_blank_lines)
  38) ../monolith/web/phpincludes/envoi.php (single_quote, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines)
  39) ../monolith/web/phpincludes/action.php (no_unneeded_braces, single_quote, single_line_comment_spacing, concat_space, yoda_style, space_after_semicolon, no_extra_blank_lines, no_whitespace_in_blank_line)

Found 39 of 43 files that can be fixed in 0.212 seconds, 16.00 MB memory used
</code></pre>

<p>All safe it'd seem, let's apply those then: <code>make cs-fix</code></p>

<h2 id="conclusion">Conclusion</h2>

<p>By progressively applying PHP CS Fixer rule sets,
we've transformed BisouLand's chaotic 2005 code into something that follows modern standards.</p>

<p>The key insight here is <strong>incrementalism</strong>,
we didn't jump straight to the strictest rule set,
but instead built up gradually:</p>

<ol>
<li>PSR-1: Basic formatting (opening tags, encoding)</li>
<li>PSR-2: Braces and indentation</li>
<li>PSR-12: Modern PHP syntax support</li>
<li>PER-CS 2.0: PHP 8 features (adjusted for PHP 5.6 compatibility)</li>
<li>Symfony: Stricter PHPDoc, imports, and performance optimisations</li>
</ol>

<p>Along the way we:</p>

<ul>
<li><strong>Identified problematic rules</strong> (<code>statement_indentation</code> breaks mixed HTML/PHP files)</li>
<li><strong>Adapted for PHP version constraints</strong> (trailing commas only for arrays in PHP 5.6)</li>
<li><strong>Applied changes incrementally</strong> (check, fix, test, repeat)</li>
</ul>

<p>The final configuration gives us automated formatting that makes the code more
readable and maintainable, without breaking functionality.</p>

<p>Now, before we move on, here's a super secret PHP CS Fixer tip:
you can run <code>php-cs-fixer describe &lt;rule/ruleset&gt;</code>,
which serves as a local documentation:</p>

<pre><code class="console">&gt; docker compose exec app php vendor/bin/php-cs-fixer describe trailing_comma_in_multiline
PHP CS Fixer 3.88.2 Folding Bike by Fabien Potencier, Dariusz Ruminski and contributors.
PHP runtime: 8.4.12
Description of the `trailing_comma_in_multiline` rule.

Arguments lists, array destructuring lists, arrays that are multi-line, `match`-lines and parameters lists must have a trailing comma.

Fixer is configurable using following options:
* after_heredoc (bool): whether a trailing comma should also be placed after heredoc end; defaults to false
* elements (a subset of ['arguments', 'array_destructuring', 'arrays', 'match', 'parameters']): where to fix multiline trailing comma (PHP &gt;= 8.0 for `parameters` and `match`); defaults to ['arrays']

Fixing examples:
 * Example #1. Fixing with the default configuration.
   ---------- begin diff ----------
   --- Original
   +++ New
   @@ -1,5 +1,5 @@
    &lt;?php
    array(
        1,
   -    2
   +    2,
    );

   ----------- end diff -----------

 * Example #2. Fixing with configuration: ['after_heredoc' =&gt; true].
   ---------- begin diff ----------
   --- Original
   +++ New
   @@ -1,7 +1,7 @@
    &lt;?php
        $x = [
            'foo',
            &lt;&lt;&lt;EOD
                bar
   -            EOD
   +            EOD,
        ];

   ----------- end diff -----------

 * Example #3. Fixing with configuration: ['elements' =&gt; ['arguments']].
   ---------- begin diff ----------
   --- Original
   +++ New
   @@ -1,5 +1,5 @@
    &lt;?php
    foo(
        1,
   -    2
   +    2,
    );

   ----------- end diff -----------

 * Example #4. Fixing with configuration: ['elements' =&gt; ['parameters']].
   ---------- begin diff ----------
   --- Original
   +++ New
   @@ -1,7 +1,7 @@
    &lt;?php
    function foo(
        $x,
   -    $y
   +    $y,
    )
    {
    }

   ----------- end diff -----------

The fixer is part of the following rule sets:
* @PER *(deprecated)* with config: ['after_heredoc' =&gt; true, 'elements' =&gt; ['arguments', 'array_destructuring', 'arrays', 'match', 'parameters']]
* @PER-CS with config: ['after_heredoc' =&gt; true, 'elements' =&gt; ['arguments', 'array_destructuring', 'arrays', 'match', 'parameters']]
* @PER-CS2.0 *(deprecated)* with config: ['after_heredoc' =&gt; true, 'elements' =&gt; ['arguments', 'array_destructuring', 'arrays', 'match', 'parameters']]
* @PER-CS2x0 with config: ['after_heredoc' =&gt; true, 'elements' =&gt; ['arguments', 'array_destructuring', 'arrays', 'match', 'parameters']]
* @PER-CS3.0 *(deprecated)* with config: ['after_heredoc' =&gt; true, 'elements' =&gt; ['arguments', 'array_destructuring', 'arrays', 'match', 'parameters']]
* @PER-CS3x0 with config: ['after_heredoc' =&gt; true, 'elements' =&gt; ['arguments', 'array_destructuring', 'arrays', 'match', 'parameters']]
* @PHP73Migration *(deprecated)* with config: ['after_heredoc' =&gt; true]
* @PHP74Migration *(deprecated)* with config: ['after_heredoc' =&gt; true]
* @PHP7x3Migration with config: ['after_heredoc' =&gt; true]
* @PHP7x4Migration with config: ['after_heredoc' =&gt; true]
* @PHP80Migration *(deprecated)* with config: ['after_heredoc' =&gt; true]
* @PHP81Migration *(deprecated)* with config: ['after_heredoc' =&gt; true]
* @PHP82Migration *(deprecated)* with config: ['after_heredoc' =&gt; true]
* @PHP83Migration *(deprecated)* with config: ['after_heredoc' =&gt; true]
* @PHP84Migration *(deprecated)* with config: ['after_heredoc' =&gt; true]
* @PHP85Migration *(deprecated)* with config: ['after_heredoc' =&gt; true]
* @PHP8x0Migration with config: ['after_heredoc' =&gt; true]
* @PHP8x1Migration with config: ['after_heredoc' =&gt; true]
* @PHP8x2Migration with config: ['after_heredoc' =&gt; true]
* @PHP8x3Migration with config: ['after_heredoc' =&gt; true]
* @PHP8x4Migration with config: ['after_heredoc' =&gt; true]
* @PHP8x5Migration with config: ['after_heredoc' =&gt; true]
* @PhpCsFixer with config: ['after_heredoc' =&gt; true, 'elements' =&gt; ['array_destructuring', 'arrays']]
* @Symfony with config: ['after_heredoc' =&gt; true, 'elements' =&gt; ['array_destructuring', 'arrays', 'match', 'parameters']]
</code></pre>

<blockquote>
  <p>â‰ï¸ <em>Hold on, what about those <strong>SQL injection vulnerabilities</strong>?</em></p>
</blockquote>
]]></content>
        </entry>
    </feed>